{%  extends 'accounts/main.html' %}

{% block content %}

{{request.post}}

<h2>This is Instruct Student Select</h2>
<p>This will hold the 3 dropdown menus for selecting a student, curriculum, and challenge which will then load a form for the instructor to assess that particular challenge for that student/curriculum.</p>
<form method="post" action="/instruct/InstructStudentChallenge">
	{% csrf_token %}
	<select id="studentid" name="student"><option value="5">Test Student</option></select>

	<select id="curriculumid" name="curriculum"><option value="1">Test Adult White Belt</option></select>

	<select id="challengeid" name="challenge"><option value="1">Test Attention Stance: Charyut</option></select>

	<button type="submit">Start Assessment</button>
</form>
<div id="studentsearchtable">
	<h2>Students</h2>
	<table class="table table-sm">
		<tr>
			<th>Challenge</th>
			<th>Type of Review</th>
			<th>Type of Answer</th>
			<th>Recent Status</th>
		</tr>
		{% for challenge in challengeList %}
		<tr>
			<td>{{challenge.challengeid.longname}}</td>
			<td>{{challenge.challengeid.challengetypeid}}</td>
			<td>{{challenge.challengeid.answertypeid}}</td>
			<td>TODO: Recent Challenge Status</td>
		</tr>
		{% endfor %}
	</table>
</div>
<div id="curriculumsearchtable">
	<h2>Curriculums for Student#5</h2>
	<table class="table table-sm">
		<tr>
			<th>Challenge</th>
			<th>Type of Review</th>
			<th>Type of Answer</th>
			<th>Recent Status</th>
		</tr>
		{% for challenge in challengeList %}
		<tr>
			<td>{{challenge.challengeid.longname}}</td>
			<td>{{challenge.challengeid.challengetypeid}}</td>
			<td>{{challenge.challengeid.answertypeid}}</td>
			<td>TODO: Recent Challenge Status</td>
		</tr>
		{% endfor %}
	</table>
</div>
<div id="challengesearchtable">
	<h2>Challenges</h2>
	<table class="table table-sm">
		<tr>
			<th>Challenge</th>
			<th>Type of Review</th>
			<th>Type of Answer</th>
			<th>Recent Status</th>
		</tr>
		{% for challenge in challengeList %}
		<tr>
			<td>{{challenge.challengeid.longname}}</td>
			<td>{{challenge.challengeid.challengetypeid}}</td>
			<td>{{challenge.challengeid.answertypeid}}</td>
			<td>TODO: Recent Challenge Status</td>
		</tr>
		{% endfor %}
	</table>
</div>
<script type="text/javascript">
	var studentsearch = document.getElementById("studentsearchtable");
	var curriculumsearch = document.getElementById("curriculumsearchtable");
	var challengesearch = document.getElementById("challengesearchtable");
	
	const queryString = window.location.search;
	const urlParams = new URLSearchParams(queryString);
	if((urlParams.get('studentid')) && (urlParams.get('curriculumid'))) {
		studentsearch.style.display = "none";
		curriculumsearch.style.display = "none";
		challengesearch.style.display = "block";
	} else if(urlParams.get('studentid')) {
		studentsearch.style.display = "none";
		curriculumsearch.style.display = "block";
		challengesearch.style.display = "none";
	} else {
		studentsearch.style.display = "block";
		curriculumsearch.style.display = "none";
		challengesearch.style.display = "none";
	}
</script>
{% endblock %}